#!/bin/bash

# ata.info: get info on automated TA status

sysactive() {
	systemctl is-active $1
}

MD=/var/orbit/email_data/
echo "mail count: 		$(ls $MD/mail | wc -l)"
echo "mail_ready count:	$(ls $MD/mail_ready | wc -l)"
echo "sub.log lines:		$(test -f "$MD/sub.log" && wc -l < $MD/sub.log || echo "0")"
echo "valid.log lines:	$(test -f "$MD/valid.log" && wc -l < $MD/valid.log || echo "0")"
echo "ata.path status:	$(sysactive ata.path)"
echo "ata status:		$(sysactive ata.service)"
echo "tbreak status:		$(sysactive tbreak.service)"
echo "watchdog status:	$(sysactive watchdog.service)"
echo "canopy status:		$(sysactive canopy.service)"
echo "smtp status:		$(sysactive smtp.socket)"
echo "pop status:		$(sysactive pop.socket)"
